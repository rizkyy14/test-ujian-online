<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TEST UJIAN ONLINE</title>
    <style>
      body {
        font-family: sans-serif;
        background: #f0f0f0;
        margin: 0;
        padding: 0;
      }
      .container {
        max-width: 800px;
        margin: 30px auto;
        background: #fff;
        padding: 20px;
        border-radius: 10px;
      }
      .question {
        margin-bottom: 20px;
      }
      .options {
        list-style: none;
        padding: 0;
      }
      .options li {
        margin-bottom: 10px;
      }
      .nav {
        display: flex;
        justify-content: space-around;
        background: #fff;
        padding: 10px;
        border-top: 1px solid #ccc;
        position: fixed;
        bottom: 0;
        width: 100%;
        left: 0;
      }
      .nav button {
        font-size: 18px;
        padding: 10px;
        border-radius: 8px;
        cursor: pointer;
        position: relative;
      }
      .nav button:hover::after {
        content: attr(data-tooltip);
        position: absolute;
        bottom: 40px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.7);
        color: #fff;
        padding: 5px 10px;
        border-radius: 5px;
        white-space: nowrap;
        font-size: 14px;
      }
      .number-panel {
        position: fixed;
        top: 0;
        right: -300px;
        height: 100%;
        width: 250px;
        background: #fff;
        box-shadow: -2px 0 5px rgba(0, 0, 0, 0.2);
        padding: 20px;
        transition: right 0.3s ease;
      }
      .number-panel.show {
        right: 0;
      }
      .number-list {
        display: flex;
        flex-wrap: wrap;
        gap: 5px;
      }
      .number-list button {
        width: 35px;
        height: 35px;
        border-radius: 50%;
        border: none;
        cursor: pointer;
      }
      .ragu {
        background: orange;
        color: white;
      }
      .yakin {
        background: green;
        color: white;
      }
      .soal-terpilih {
        background: purple;
        color: white;
      }

      #skor-akhir {
        text-align: center;
        font-size: 20px;
        padding: 20px;
        background: #dff0d8;
        color: #3c763d;
        margin-top: 20px;
        border-radius: 10px;
        display: none;
      }
      .detail-button {
        background: #007bff;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        margin-top: 15px;
      }
      .detail-button:hover {
        background: #0056b3;
      }
      .review-panel {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        display: none;
        z-index: 1000;
      }
      .review-content {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: white;
        padding: 20px;
        border-radius: 10px;
        max-width: 90%;
        max-height: 80%;
        overflow-y: auto;
        width: 700px;
      }
      .review-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        border-bottom: 2px solid #ccc;
        padding-bottom: 10px;
      }
      .close-button {
        background: #dc3545;
        color: white;
        border: none;
        padding: 5px 15px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
      }
      .close-button:hover {
        background: #c82333;
      }
      .review-item {
        margin-bottom: 15px;
        padding: 15px;
        border-radius: 8px;
        border-left: 5px solid;
      }
      .correct {
        background: #d4edda;
        border-left-color: #28a745;
        color: #155724;
      }
      .incorrect {
        background: #f8d7da;
        border-left-color: #dc3545;
        color: #721c24;
      }
      .unanswered {
        background: #fff3cd;
        border-left-color: #ffc107;
        color: #856404;
      }
      .question-text {
        font-weight: bold;
        margin-bottom: 8px;
      }
      .answer-info {
        font-size: 14px;
      }
      .correct-answer {
        color: #28a745;
        font-weight: bold;
      }
      .wrong-answer {
        color: #dc3545;
        font-weight: bold;
      }

      .review-answer {
        background: #0b009e;
        color: white;
        border: none;
        padding: 5px 15px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
      }

      @media (max-width: 480px) {
        .nav button {
          font-size: 14px;
          padding: 6px;
        }

        .number-list button {
          width: 28px;
          height: 28px;
        }

        .review-content {
          width: 95%;
          padding: 15px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div id="question-container"></div>
      <div id="skor-akhir"></div>
    </div>

    <div class="number-panel" id="number-panel">
      <h4>Daftar Soal</h4>
      <div class="number-list" id="number-list"></div>
    </div>

    <div class="review-panel" id="review-panel">
      <div class="review-content">
        <div class="review-header">
          <h3>Detail Jawaban</h3>
          <button class="close-button" onclick="closeReview()">Tutup</button>
        </div>
        <div id="review-list"></div>
      </div>
    </div>

    <div class="nav">
      <button onclick="prevQuestion()" data-tooltip="Mundur (Soal sebelumnya)">‚¨Ö</button>
      <button onclick="markRagu()" data-tooltip="Tandai ragu-ragu">üòê</button>
      <button onclick="markYakin()" data-tooltip="Tandai yakin">üòä</button>
      <button onclick="toggleNumberList()" data-tooltip="Lihat daftar soal">üî¢</button>
      <button onclick="hapusJawaban()" data-tooltip="Hapus jawaban">üóëÔ∏è</button>
      <button onclick="submitExam()" data-tooltip="Selesaikan ujian">‚úÖ</button>
      <button onclick="nextQuestion()" data-tooltip="Maju (Soal berikutnya)">‚û°</button>
    </div>

    <script>
      const questions = [
        // GRAMMAR / STRUCTURE
        // 1) TENSES ‚Äì PRESENT CONTINUOUS
        { text: 'Listen! The baby ___ loudly now.', options: ['cries', 'is crying', 'cried', 'will cry', 'has cried'], correct: 1, level: 'menengah', answer: null, status: '' },
        { text: 'Be quiet, the teacher ___ to us.', options: ['talks', 'is talking', 'talked', 'will talk', 'has talked'], correct: 1, level: 'sulit', answer: null, status: '' },

        // 2) TENSES ‚Äì SIMPLE PRESENT
        { text: 'The sun ___ in the east.', options: ['rise', 'rises', 'rose', 'is rising', 'has risen'], correct: 1, level: 'menengah', answer: null, status: '' },
        { text: 'Do your parents ___ coffee in the morning?', options: ['drinks', 'drink', 'drank', 'drinking', 'to drink'], correct: 1, level: 'sulit', answer: null, status: '' },

        // 3) TENSES ‚Äì SIMPLE PAST
        { text: 'We ___ to the museum last Sunday.', options: ['go', 'goes', 'went', 'going', 'gone'], correct: 2, level: 'menengah', answer: null, status: '' },
        { text: 'She ___ a new bag yesterday.', options: ['buys', 'buy', 'bought', 'buying', 'has bought'], correct: 2, level: 'menengah', answer: null, status: '' },

        // 4) TENSES ‚Äì SIMPLE FUTURE
        { text: 'I ___ visit my grandmother tomorrow.', options: ['am', 'will', 'was', 'have', 'had'], correct: 1, level: 'menengah', answer: null, status: '' },
        { text: '___ you join the school trip next week?', options: ['Do', 'Did', 'Will', 'Are', 'Have'], correct: 2, level: 'menengah', answer: null, status: '' },
        { text: 'It looks cloudy. I think it ___ rain.', options: ['will', 'does', 'did', 'is', 'has'], correct: 0, level: 'sulit', answer: null, status: '' },

        // 5) ADJECTIVE
        { text: 'This problem is very ___; I need help.', options: ['easy', 'easier', 'easiest', 'difficult', 'most easy'], correct: 3, level: 'menengah', answer: null, status: '' },
        { text: 'The soup tastes ___.', options: ['delicious', 'deliciously', 'delight', 'delighted', 'delighting'], correct: 0, level: 'menengah', answer: null, status: '' },
        { text: 'Choose the adjective: The room feels ___ after we opened the window.', options: ['fresh', 'freshly', 'freshness', 'refresh', 'refreshedly'], correct: 0, level: 'sulit', answer: null, status: '' },

        // 6) PREPOSITION
        { text: 'The cat is ___ the table.', options: ['in', 'on', 'at', 'to', 'by'], correct: 1, level: 'menengah', answer: null, status: '' },
        { text: 'My school is ___ Jalan Merdeka No. 7.', options: ['in', 'on', 'at', 'to', 'by'], correct: 2, level: 'menengah', answer: null, status: '' },
        { text: 'We usually study English ___ Monday morning.', options: ['in', 'on', 'at', 'by', 'for'], correct: 1, level: 'sulit', answer: null, status: '' },

        // 7) VERB
        { text: 'She ___ to school by bicycle.', options: ['go', 'goes', 'going', 'went', 'gone'], correct: 1, level: 'menengah', answer: null, status: '' },
        { text: 'Pick the correct base form to complete: They have ___ their homework.', options: ['do', 'did', 'done', 'doing', 'does'], correct: 2, level: 'sulit', answer: null, status: '' },

        // 8) USE OF "CAN"
        { text: 'Dina ___ swim very well.', options: ['can', 'must', 'should', 'may', 'will'], correct: 0, level: 'menengah', answer: null, status: '' },
        { text: '___ you help me carry these books?', options: ['Must', 'Can', 'Should', 'May', 'Would'], correct: 1, level: 'menengah', answer: null, status: '' },
        { text: 'We ___ not enter the lab without permission.', options: ['can', "can't", 'could', 'may', 'able'], correct: 1, level: 'sulit', answer: null, status: '' },

        // 9) TIME
        { text: 'The meeting starts at ___.', options: ['seven o‚Äôclock', 'yesterday', 'tomorrow', 'last week', 'soon'], correct: 0, level: 'menengah', answer: null, status: '' },
        { text: 'We have English ___ Tuesdays and Thursdays.', options: ['at', 'on', 'in', 'by', 'for'], correct: 1, level: 'sulit', answer: null, status: '' },

        // 10) ADVERB OF FREQUENCY
        { text: 'He ___ arrives late to school.', options: ['always', 'never', 'often', 'sometimes', 'seldom'], correct: 1, level: 'menengah', answer: null, status: '' },
        { text: 'We ___ go to the library after class (about 70% of the time).', options: ['always', 'usually', 'often', 'rarely', 'never'], correct: 2, level: 'menengah', answer: null, status: '' },
        { text: 'Choose the correct position: She ___ eats breakfast at home.', options: ['eats always', 'always eats', 'eat always', 'is always eat', 'eating always'], correct: 1, level: 'sulit', answer: null, status: '' },

        // 11) PRONOUN
        { text: 'This book is mine, not ___.', options: ['your', 'yours', 'you', 'her', 'their'], correct: 1, level: 'menengah', answer: null, status: '' },
        { text: 'Ani and Budi are siblings. ___ live near my house.', options: ['He', 'She', 'It', 'They', 'Them'], correct: 3, level: 'sulit', answer: null, status: '' },

        // 12) COMPARATIVE & SUPERLATIVE
        { text: 'This road is ___ than that one.', options: ['wide', 'wider', 'widest', 'more wide', 'most wide'], correct: 1, level: 'menengah', answer: null, status: '' },
        { text: 'Mount Everest is the ___ mountain in the world.', options: ['high', 'higher', 'highest', 'more high', 'most high'], correct: 2, level: 'menengah', answer: null, status: '' },
        { text: 'Of the three cars, the red one is the ___.', options: ['fast', 'faster', 'fastest', 'most fast', 'more fast'], correct: 2, level: 'sulit', answer: null, status: '' },

        // 13) WH-QUESTIONS
        { text: '___ is your birthday?', options: ['What', 'Where', 'When', 'Why', 'How'], correct: 2, level: 'menengah', answer: null, status: '' },
        { text: '___ are you late? Because the bus broke down.', options: ['What', 'Where', 'When', 'Why', 'Who'], correct: 3, level: 'menengah', answer: null, status: '' },
        { text: '___ book is this? It is Andi‚Äôs.', options: ['Who', 'Whom', 'Whose', 'Which', 'What'], correct: 2, level: 'sulit', answer: null, status: '' },

        // READING COMPREHENSION
        // 14) MAIN IDEA QUESTIONS
        {
          text: 'Text: "Many students join the eco-club to plant trees and clean the school yard." What is the main idea?',
          options: ['Students hate trees', 'Eco-club activities at school', 'Teachers assign too much homework', 'Planting is dangerous', 'School yard is small'],
          correct: 1,
          level: 'menengah',
          answer: null,
          status: '',
        },
        {
          text: 'Text: "A volcano is an opening in the earth that can release lava and ash." The main idea is ___',
          options: ['How to make lava', 'Definition of a volcano', 'The biggest volcano', 'Volcanoes are safe', 'Earth is flat'],
          correct: 1,
          level: 'menengah',
          answer: null,
          status: '',
        },
        {
          text: 'Text: "Budi practices badminton every afternoon to join the city tournament." The main idea focuses on ___',
          options: ['Budi‚Äôs hobby and goal', 'City traffic', 'Morning routine', 'Cooking skills', 'Reading habits'],
          correct: 0,
          level: 'sulit',
          answer: null,
          status: '',
        },

        // 15) STATED DETAIL QUESTIONS
        { text: 'Text: "The library opens at 8 a.m. and closes at 4 p.m." When does the library close?', options: ['2 p.m.', '3 p.m.', '4 p.m.', '5 p.m.', '6 p.m.'], correct: 2, level: 'menengah', answer: null, status: '' },
        { text: 'Text: "Rani bought two notebooks and a blue pen." What color is the pen?', options: ['Red', 'Blue', 'Black', 'Green', 'Yellow'], correct: 1, level: 'menengah', answer: null, status: '' },
        {
          text: 'Text: "The bus to the museum arrives every 30 minutes." How often does it arrive?',
          options: ['Every 10 minutes', 'Every 20 minutes', 'Every 30 minutes', 'Every hour', 'Twice a day'],
          correct: 2,
          level: 'sulit',
          answer: null,
          status: '',
        },

        // 16) UNSTATED DETAIL QUESTIONS
        {
          text: 'Text: "Maya wears a raincoat and brings an umbrella." Which detail is NOT stated?',
          options: ['It is raining', 'She brings an umbrella', 'She wears a raincoat', 'She prepares for wet weather', 'She is Maya'],
          correct: 0,
          level: 'menengah',
          answer: null,
          status: '',
        },
        { text: 'Text: "The caf√© sells coffee, tea, and sandwiches." Which is NOT mentioned?', options: ['Coffee', 'Tea', 'Sandwiches', 'Cake', 'Drinks'], correct: 3, level: 'menengah', answer: null, status: '' },
        {
          text: 'Text: "Our class visited the zoo last Friday to study animals." Which is NOT stated?',
          options: ['The visit was on Friday', 'They studied animals', 'They visited a zoo', 'They fed the tigers', 'It was a class activity'],
          correct: 3,
          level: 'sulit',
          answer: null,
          status: '',
        },

        // 17) IMPLIED DETAIL QUESTIONS
        { text: 'Text: "Riko turned off the fan and put on a jacket." We can infer that the weather is ___', options: ['hot', 'rainy', 'cold', 'windy', 'sunny'], correct: 2, level: 'menengah', answer: null, status: '' },
        { text: 'Text: "The lights are off and the shop door is locked." It implies the shop is ___', options: ['open', 'closing soon', 'closed', 'busy', 'new'], correct: 2, level: 'menengah', answer: null, status: '' },
        { text: 'Text: "Sita brought a camera to the beach." This implies she plans to ___', options: ['swim', 'sleep', 'take photos', 'cook', 'read'], correct: 2, level: 'sulit', answer: null, status: '' },

        // 18) VOCABULARY IN CONTEXT
        { text: 'Text: "The road is slippery, so drive carefully." The word "slippery" means ___', options: ['rough', 'wet and smooth', 'dry and safe', 'dusty', 'crowded'], correct: 1, level: 'menengah', answer: null, status: '' },
        { text: 'Text: "Please discard the bottle in the bin." The word "discard" is closest in meaning to ___', options: ['keep', 'fix', 'throw away', 'buy', 'borrow'], correct: 2, level: 'menengah', answer: null, status: '' },
        { text: 'Text: "The museum exhibits ancient tools." The word "ancient" means ___', options: ['very new', 'very old', 'expensive', 'popular', 'useful'], correct: 1, level: 'sulit', answer: null, status: '' },

        // 19) "WHERE" QUESTIONS
        { text: 'Where do we usually borrow books?', options: ['Library', 'Cafeteria', 'Gym', 'Laboratory', 'Garage'], correct: 0, level: 'menengah', answer: null, status: '' },
        { text: 'Where does a pilot work?', options: ['Hospital', 'Airport', 'Market', 'Bank', 'Farm'], correct: 1, level: 'menengah', answer: null, status: '' },
        { text: 'Where can we see many kinds of fish?', options: ['Zoo', 'Museum', 'Aquarium', 'Park', 'Library'], correct: 2, level: 'sulit', answer: null, status: '' },

        // VOCABULARY CLOZE
        // 20) NUMBER
        { text: 'I have ___ pencils and one eraser.', options: ['two', 'twelve', 'second', 'twice', 'tense'], correct: 0, level: 'menengah', answer: null, status: '' },
        { text: 'Fifty plus twenty equals ___.', options: ['sixty', 'seventy', 'eighty', 'ninety', 'forty'], correct: 1, level: 'sulit', answer: null, status: '' },

        // 21) VEHICLE
        { text: 'A ___ has two wheels and is powered by pedaling.', options: ['bus', 'bicycle', 'car', 'train', 'ship'], correct: 1, level: 'menengah', answer: null, status: '' },
        { text: 'A ___ carries many people on the road and stops at stations.', options: ['boat', 'truck', 'bus', 'scooter', 'helicopter'], correct: 2, level: 'sulit', answer: null, status: '' },

        // 22) PLACES
        { text: 'We buy medicine at the ___.', options: ['bakery', 'pharmacy', 'library', 'cinema', 'factory'], correct: 1, level: 'menengah', answer: null, status: '' },
        { text: 'Tourists see paintings and sculptures in a ___.', options: ['market', 'museum', 'school', 'stadium', 'warehouse'], correct: 1, level: 'menengah', answer: null, status: '' },

        // 23) THINGS IN ROOM
        { text: 'You sleep on a ___.', options: ['desk', 'bed', 'chair', 'shelf', 'carpet'], correct: 1, level: 'menengah', answer: null, status: '' },
        { text: 'Books are usually kept on a ___.', options: ['mirror', 'wardrobe', 'bookshelf', 'pillow', 'blanket'], correct: 2, level: 'menengah', answer: null, status: '' },
        { text: 'Turn on the ___ to get more light.', options: ['drawer', 'lamp', 'curtain', 'door', 'clock'], correct: 1, level: 'sulit', answer: null, status: '' },
      ];

      let current = 0;
      let examFinished = false;

      function renderQuestion() {
        const q = questions[current];
        const container = document.getElementById('question-container');
        container.innerHTML = `
              <div class="question">
                <h3>Soal No. ${current + 1}</h3>
                <p>${q.text}</p>
                <ul class="options">
                  ${q.options
                    .map(
                      (opt, idx) => `
                    <li>
                      <label>
                        <input type="radio" name="answer" value="${idx}" ${q.answer == idx ? 'checked' : ''} onclick="selectAnswer(${idx})" ${examFinished ? 'disabled' : ''}>
                        ${opt}
                      </label>
                    </li>
                  `
                    )
                    .join('')}
                </ul>
              </div>`;
        renderNumberList();
      }

      function renderNumberList() {
        const list = document.getElementById('number-list');
        list.innerHTML = '';
        questions.forEach((q, i) => {
          const btn = document.createElement('button');
          btn.textContent = i + 1;
          if (i === current) btn.classList.add('soal-terpilih');
          if (q.status === 'ragu') btn.classList.add('ragu');
          else if (q.answer !== null) btn.classList.add('yakin');
          btn.onclick = () => {
            current = i;
            renderQuestion();
          };
          list.appendChild(btn);
        });
      }

      function selectAnswer(index) {
        if (!examFinished) {
          questions[current].answer = index;
          renderQuestion();
        }
      }

      function prevQuestion() {
        if (current > 0) current--;
        renderQuestion();
      }

      function nextQuestion() {
        if (current < questions.length - 1) current++;
        renderQuestion();
      }

      function markRagu() {
        if (!examFinished) {
          questions[current].status = 'ragu';
          renderQuestion();
        }
      }

      function markYakin() {
        if (!examFinished) {
          questions[current].status = 'yakin';
          renderQuestion();
        }
      }

      function toggleNumberList() {
        document.getElementById('number-panel').classList.toggle('show');
      }

      function hapusJawaban() {
        if (!examFinished) {
          questions[current].answer = null;
          questions[current].status = '';
          renderQuestion();
        }
      }

      function submitExam() {
        if (examFinished) return;

        if (!confirm('Apakah kamu yakin ingin menyelesaikan ujian?')) return;

        let nilai = 0;
        let benar = 0;
        let salah = 0;

        questions.forEach((q) => {
          if (q.answer !== null) {
            if (q.answer === q.correct) {
              benar++;
              nilai += 4; // jawaban benar +4
            } else {
              salah++;
              nilai -= 1; // jawaban salah -1
            }
          }
          // jika tidak dijawab (null) ‚Üí nilai tetap 0
        });

        examFinished = true;
        const skorDiv = document.getElementById('skor-akhir');
        skorDiv.innerHTML = `
    <strong>Skor akhir:</strong> ${nilai} poin
    <br>
    <small>(Benar: ${benar} | Salah: ${salah} | Kosong: ${questions.length - benar - salah})</small>
    <br>
    <button class="detail-button" onclick="showReview()">Lihat Detail Jawaban</button>
  `;
        skorDiv.style.display = 'block';
        renderQuestion(); // Refresh to disable inputs
      }

      function showReview() {
        const reviewList = document.getElementById('review-list');
        let reviewHTML = '';

        questions.forEach((q, index) => {
          let statusClass = '';
          let statusText = '';
          let answerInfo = '';

          if (q.answer === null) {
            statusClass = 'unanswered';
            statusText = 'Tidak dijawab';
            answerInfo = `
        <div class="answer-info">
          <button class="review-answer" onclick="showCorrectAnswer(${index}, this)">Tampilkan jawaban yang benar</button>
          <div id="correct-${index}" style="display:none; margin-top:8px;">
            <span class="correct-answer">${q.options[q.correct]}</span><br>
          </div>
        </div>`;
          } else if (q.answer === q.correct) {
            statusClass = 'correct';
            statusText = 'Benar';
            answerInfo = `<div class="answer-info">Jawaban Anda: <span class="correct-answer">${q.options[q.answer]}</span> ‚úì</div>`;
          } else {
            statusClass = 'incorrect';
            statusText = 'Salah';
            answerInfo = `
        <div class="answer-info">
          Jawaban Anda: <span class="wrong-answer">${q.options[q.answer]}</span> ‚úó<br>
          <button class="review-answer" onclick="showCorrectAnswer(${index}, this)">Tampilkan jawaban yang benar</button>
          <div id="correct-${index}" style="display:none; margin-top:8px;">
            Jawaban yang benar: <span class="correct-answer">${q.options[q.correct]}</span><br>
          </div>
        </div>`;
          }

          reviewHTML += `
      <div class="review-item ${statusClass}">
        <div class="question-text">Soal ${index + 1}: ${q.text}</div>
        <div style="margin: 8px 0; font-weight: bold;">${statusText}</div>
        ${answerInfo}
      </div>
    `;
        });

        reviewList.innerHTML = reviewHTML;
        document.getElementById('review-panel').style.display = 'block';
      }

      // fungsi untuk menampilkan jawaban benar
      function showCorrectAnswer(index, btn) {
        document.getElementById(`correct-${index}`).style.display = 'block';
        btn.style.display = 'none'; // sembunyikan tombol setelah diklik
      }

      function closeReview() {
        document.getElementById('review-panel').style.display = 'none';
      }

      // Close review panel when clicking outside
      document.getElementById('review-panel').addEventListener('click', function (e) {
        if (e.target === this) {
          closeReview();
        }
      });

      renderQuestion();
    </script>
  </body>
</html>
